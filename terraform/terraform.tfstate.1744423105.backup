{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 177,
  "lineage": "8f68cfa9-8089-9f01-d74a-d83f1dfea1bf",
  "outputs": {
    "appsync_graphql_api_id": {
      "value": "6u47w5vfrfbuxi3mcea6zdswhm",
      "type": "string"
    },
    "appsync_graphql_api_url": {
      "value": "https://dmmzta55mfdbvclw3fsjdewqaq.appsync-api.us-east-1.amazonaws.com/graphql",
      "type": "string"
    },
    "cognito_app_client_id": {
      "value": "2ofl2p1h8ch8ifn3pn678ruhmh",
      "type": "string"
    },
    "cognito_identity_pool_id": {
      "value": "us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55",
      "type": "string"
    },
    "cognito_user_pool_endpoint": {
      "value": "cognito-idp.us-east-1.amazonaws.com/us-east-1_s4UGZgOnW",
      "type": "string"
    },
    "cognito_user_pool_id": {
      "value": "us-east-1_s4UGZgOnW",
      "type": "string"
    },
    "dynamodb_follows_table_name": {
      "value": "follows",
      "type": "string"
    },
    "dynamodb_interactions_table_name": {
      "value": "interactions",
      "type": "string"
    },
    "dynamodb_posts_table_name": {
      "value": "posts",
      "type": "string"
    },
    "dynamodb_users_table_name": {
      "value": "users",
      "type": "string"
    },
    "media_bucket_domain_name": {
      "value": "timelapse-media-dev-de7fe9a5.s3.amazonaws.com",
      "type": "string"
    },
    "media_bucket_name": {
      "value": "timelapse-media-dev-de7fe9a5",
      "type": "string"
    },
    "react_native_config": {
      "value": "{\"aws_region\":\"us-east-1\",\"environment\":\"dev\",\"graphql_endpoint\":\"https://dmmzta55mfdbvclw3fsjdewqaq.appsync-api.us-east-1.amazonaws.com/graphql\",\"identity_pool_id\":\"us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55\",\"s3_bucket\":\"timelapse-media-dev-de7fe9a5\",\"user_pool_id\":\"us-east-1_s4UGZgOnW\",\"user_pool_web_client_id\":\"2ofl2p1h8ch8ifn3pn678ruhmh\"}",
      "type": "string"
    },
    "react_native_dotenv": {
      "value": "# AWS Configuration for Timelapse App - dev environment\n# Generated by Terraform\n\nREACT_APP_AWS_REGION=us-east-1\nREACT_APP_COGNITO_USER_POOL_ID=us-east-1_s4UGZgOnW\nREACT_APP_COGNITO_APP_CLIENT_ID=2ofl2p1h8ch8ifn3pn678ruhmh\nREACT_APP_COGNITO_IDENTITY_POOL_ID=us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55\nREACT_APP_S3_BUCKET_NAME=timelapse-media-dev-de7fe9a5\nREACT_APP_GRAPHQL_ENDPOINT=https://dmmzta55mfdbvclw3fsjdewqaq.appsync-api.us-east-1.amazonaws.com/graphql\nREACT_APP_ENVIRONMENT=dev\n",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "follows_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/FollowsTable",
            "description": "",
            "dynamodb_config": [
              {
                "delta_sync_config": [],
                "region": "us-east-1",
                "table_name": "follows",
                "use_caller_credentials": false,
                "versioned": false
              }
            ],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-FollowsTable",
            "lambda_config": [],
            "name": "FollowsTable",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-dynamodb-role-dev",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.follows_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "generate_presigned_url_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/GeneratePresignedUrlFunction",
            "description": "",
            "dynamodb_config": [],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-GeneratePresignedUrlFunction",
            "lambda_config": [
              {
                "function_arn": "arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev"
              }
            ],
            "name": "GeneratePresignedUrlFunction",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-lambda-role-dev",
            "type": "AWS_LAMBDA"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_iam_role.appsync_lambda_role",
            "aws_iam_role.appsync_logs_role",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.presigned_url_lambda",
            "aws_s3_bucket.media_bucket",
            "null_resource.package_presigned_url_lambda",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "interactions_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/InteractionsTable",
            "description": "",
            "dynamodb_config": [
              {
                "delta_sync_config": [],
                "region": "us-east-1",
                "table_name": "interactions",
                "use_caller_credentials": false,
                "versioned": false
              }
            ],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-InteractionsTable",
            "lambda_config": [],
            "name": "InteractionsTable",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-dynamodb-role-dev",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.interactions_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "none",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/NONE",
            "description": "",
            "dynamodb_config": [],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-NONE",
            "lambda_config": [],
            "name": "NONE",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "",
            "type": "NONE"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "posts_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/PostsTable",
            "description": "",
            "dynamodb_config": [
              {
                "delta_sync_config": [],
                "region": "us-east-1",
                "table_name": "posts",
                "use_caller_credentials": false,
                "versioned": false
              }
            ],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-PostsTable",
            "lambda_config": [],
            "name": "PostsTable",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-dynamodb-role-dev",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.posts_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "timelapse_items_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/TimelapseItemsTable",
            "description": "",
            "dynamodb_config": [
              {
                "delta_sync_config": [],
                "region": "us-east-1",
                "table_name": "timelapse-timelapse-items-dev",
                "use_caller_credentials": false,
                "versioned": false
              }
            ],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-TimelapseItemsTable",
            "lambda_config": [],
            "name": "TimelapseItemsTable",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-dynamodb-role-dev",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.timelapse_items_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "users_datasource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/datasources/UsersTable",
            "description": "",
            "dynamodb_config": [
              {
                "delta_sync_config": [],
                "region": "us-east-1",
                "table_name": "users",
                "use_caller_credentials": false,
                "versioned": false
              }
            ],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-UsersTable",
            "lambda_config": [],
            "name": "UsersTable",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-dynamodb-role-dev",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.users_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_function",
      "name": "get_followed_posts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/functions/nsxdkmu6vngyplaeko57pakiam",
            "code": "export function request(ctx) {\n  const followedUsers = ctx.stash.followedUsers || [];\n  \n  if (followedUsers.length === 0) {\n    return {\n      \"version\": \"2018-05-29\",\n      \"operation\": \"Scan\",\n      \"limit\": 0  // Return empty list if no followed users\n    };\n  }\n  \n  // Create filter expression for userId IN (followedUser1, followedUser2, ...)\n  const expressionValues = {};\n  const filterExpressions = followedUsers.map((userId, index) =\u003e {\n    const placeholder = `:user${index}`;\n    expressionValues[placeholder] = { \"S\": userId };\n    return `userId = ${placeholder}`;\n  });\n  \n  return {\n    \"version\": \"2018-05-29\",\n    \"operation\": \"Scan\",\n    \"filter\": {\n      \"expression\": filterExpressions.join(\" OR \"),\n      \"expressionValues\": expressionValues\n    },\n    \"limit\": ctx.args.limit || 20,\n    \"nextToken\": ctx.args.nextToken || null\n  };\n}\n\nexport function response(ctx) {\n  return ctx.result;\n}\n",
            "data_source": "PostsTable",
            "description": "",
            "function_id": "nsxdkmu6vngyplaeko57pakiam",
            "function_version": "",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-nsxdkmu6vngyplaeko57pakiam",
            "max_batch_size": 0,
            "name": "GetFollowedPostsFunction",
            "request_mapping_template": "",
            "response_mapping_template": "",
            "runtime": [
              {
                "name": "APPSYNC_JS",
                "runtime_version": "1.0.0"
              }
            ],
            "sync_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.posts_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.posts_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_function",
      "name": "get_followed_users",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/functions/z7buknhjzjhpxjzhleb4drgw3e",
            "code": "",
            "data_source": "FollowsTable",
            "description": "",
            "function_id": "z7buknhjzjhpxjzhleb4drgw3e",
            "function_version": "2018-05-29",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-z7buknhjzjhpxjzhleb4drgw3e",
            "max_batch_size": 0,
            "name": "getFollowedUsers",
            "request_mapping_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"Query\",\n  \"query\": {\n    \"expression\": \"followerId = :followerId\",\n    \"expressionValues\": {\n      \":followerId\": $util.dynamodb.toDynamoDBJson($ctx.identity.sub)\n    }\n  }\n}\n",
            "response_mapping_template": "#set($followedUsers = [])\n#foreach($follow in $ctx.result.items)\n  $util.qr($followedUsers.add($follow.followedId))\n#end\n$util.toJson($followedUsers)\n",
            "runtime": [],
            "sync_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.follows_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.follows_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_function",
      "name": "get_follows",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/functions/nt252wnvcvbr3anmh7gqqo7bdi",
            "code": "export function request(ctx) {\n  return {\n    \"version\": \"2018-05-29\",\n    \"operation\": \"Query\",\n    \"index\": \"byFollowerId\",\n    \"query\": {\n      \"expression\": \"followerId = :followerId\",\n      \"expressionValues\": {\n        \":followerId\": { \"S\": ctx.identity.sub || ctx.args.userId }\n      }\n    },\n    \"limit\": ctx.args.limit || 20,\n    \"nextToken\": ctx.args.nextToken || null,\n    \"scanIndexForward\": false\n  };\n}\n\nexport function response(ctx) {\n  const followedUsers = ctx.result.items.map(follow =\u003e follow.followingId);\n  ctx.stash.followedUsers = followedUsers;\n  return ctx.result;\n}\n",
            "data_source": "FollowsTable",
            "description": "",
            "function_id": "nt252wnvcvbr3anmh7gqqo7bdi",
            "function_version": "",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-nt252wnvcvbr3anmh7gqqo7bdi",
            "max_batch_size": 0,
            "name": "GetFollowsFunction",
            "request_mapping_template": "",
            "response_mapping_template": "",
            "runtime": [
              {
                "name": "APPSYNC_JS",
                "runtime_version": "1.0.0"
              }
            ],
            "sync_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.follows_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.follows_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_function",
      "name": "get_posts_by_users",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/functions/3m3qxvgdobfnxhqgdubigwuv4y",
            "code": "",
            "data_source": "PostsTable",
            "description": "",
            "function_id": "3m3qxvgdobfnxhqgdubigwuv4y",
            "function_version": "2018-05-29",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-3m3qxvgdobfnxhqgdubigwuv4y",
            "max_batch_size": 0,
            "name": "getPostsByUsers",
            "request_mapping_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"Query\",\n  \"query\": {\n    \"expression\": \"userId IN :userIds\",\n    \"expressionValues\": {\n      \":userIds\": $util.dynamodb.toDynamoDBJson($ctx.prev.result)\n    }\n  }\n}\n",
            "response_mapping_template": "$util.toJson($ctx.result.items)\n",
            "runtime": [],
            "sync_config": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.posts_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.posts_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_graphql_api",
      "name": "timelapse_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_authentication_provider": [],
            "api_type": "GRAPHQL",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm",
            "authentication_type": "AMAZON_COGNITO_USER_POOLS",
            "enhanced_metrics_config": [],
            "id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "introspection_config": "ENABLED",
            "lambda_authorizer_config": [],
            "log_config": [
              {
                "cloudwatch_logs_role_arn": "arn:aws:iam::130635278160:role/timelapse-appsync-logs-role-dev",
                "exclude_verbose_content": false,
                "field_log_level": "ALL"
              }
            ],
            "merged_api_execution_role_arn": "",
            "name": "timelapse-api",
            "openid_connect_config": [],
            "query_depth_limit": 0,
            "resolver_count_limit": 0,
            "schema": "type User {\n  id: ID!\n  username: String!\n  name: String\n  bio: String\n  avatar: String\n  followers: [Follow]\n  following: [Follow]\n  posts: [Post]\n  timelapses: [Timelapse]\n  createdAt: String\n}\n\ntype Follow {\n  id: ID!\n  follower: User!\n  following: User!\n  createdAt: String\n}\n\ntype Post {\n  id: ID!\n  content: String\n  media: String\n  author: User!\n  likes: Int\n  comments: [Comment]\n  createdAt: String\n}\n\ntype Comment {\n  id: ID!\n  content: String!\n  author: User!\n  post: Post!\n  createdAt: String\n}\n\ntype Timelapse {\n  id: ID!\n  title: String\n  description: String\n  creator: User!\n  videoUrl: String\n  thumbnailUrl: String\n  tags: [String]\n  likes: Int\n  views: Int\n  createdAt: String\n}\n\ntype TimelapseItem @model \n  @key(name: \"byUser\", fields: [\"userId\", \"createdAt\"], queryField: \"timelapseItemsByUser\") {\n  id: ID!\n  userId: ID!\n  mediaUrl: String!\n  type: String!\n  createdAt: AWSTimestamp!\n  description: String\n  likes: Int!\n  likedBy: [String]\n  duration: Int\n}\n\ntype Query {\n  getUser(id: ID!): User\n  getUserByUsername(username: String!): User\n  listUsers: [User]\n  getPost(id: ID!): Post\n  listPosts: [Post]\n  listPostsByUser(userId: ID!): [Post]\n  getTimelapse(id: ID!): Timelapse\n  listTimelapses: [Timelapse]\n  listTimelapsesByUser(userId: ID!): [Timelapse]\n  getFollowers(userId: ID!): [User]\n  getFollowing(userId: ID!): [User]\n  listFollowedPosts(userId: ID!, limit: Int, nextToken: String): [Post]\n  listTimelapseItems(userId: ID, limit: Int, nextToken: String): TimelapseItemConnection\n}\n\ntype TimelapseItemConnection {\n  items: [TimelapseItem]\n  nextToken: String\n}\n\ntype Mutation {\n  createUser(username: String!, name: String, bio: String, avatar: String): User\n  updateUser(id: ID!, username: String, name: String, bio: String, avatar: String): User\n  deleteUser(id: ID!): Boolean\n  \n  followUser(followerId: ID!, followingId: ID!): Follow\n  unfollowUser(followerId: ID!, followingId: ID!): Boolean\n  \n  createPost(authorId: ID!, content: String, media: String): Post\n  updatePost(id: ID!, content: String, media: String): Post\n  deletePost(id: ID!): Boolean\n  likePost(id: ID!): Post\n  \n  createComment(postId: ID!, authorId: ID!, content: String!): Comment\n  updateComment(id: ID!, content: String!): Comment\n  deleteComment(id: ID!): Boolean\n  \n  createTimelapse(creatorId: ID!, title: String, description: String, videoUrl: String, thumbnailUrl: String, tags: [String]): Timelapse\n  updateTimelapse(id: ID!, title: String, description: String, videoUrl: String, thumbnailUrl: String, tags: [String]): Timelapse\n  deleteTimelapse(id: ID!): Boolean\n  likeTimelapse(id: ID!): Timelapse\n  viewTimelapse(id: ID!): Timelapse\n  \n  # Generate a presigned URL for S3 uploads\n  generatePresignedUrl(fileName: String!, fileType: String!): PresignedUrlResponse\n  createTimelapseItem(input: CreateTimelapseItemInput!): TimelapseItem\n  updateTimelapseItem(input: UpdateTimelapseItemInput!): TimelapseItem\n  deleteTimelapseItem(input: DeleteTimelapseItemInput!): TimelapseItem\n}\n\n# Response type for presigned URL generation\ntype PresignedUrlResponse {\n  uploadUrl: String!\n  fileUrl: String!\n  key: String!\n}\n\ninput CreateTimelapseItemInput {\n  userId: ID!\n  mediaUrl: String!\n  type: String!\n  createdAt: AWSTimestamp!\n  description: String\n  likes: Int!\n  likedBy: [String]\n  duration: Int\n}\n\ninput UpdateTimelapseItemInput {\n  id: ID!\n  likes: Int\n  likedBy: [String]\n  description: String\n}\n\ninput DeleteTimelapseItemInput {\n  id: ID!\n}\n\nextend type Subscription {\n  onCreateTimelapseItem(userId: ID): TimelapseItem\n    @aws_subscribe(mutations: [\"createTimelapseItem\"])\n}\n\nschema {\n  query: Query\n  mutation: Mutation\n} ",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "uris": {
              "GRAPHQL": "https://dmmzta55mfdbvclw3fsjdewqaq.appsync-api.us-east-1.amazonaws.com/graphql",
              "REALTIME": "wss://dmmzta55mfdbvclw3fsjdewqaq.appsync-realtime-api.us-east-1.amazonaws.com/graphql"
            },
            "user_pool_config": [
              {
                "app_id_client_regex": "",
                "aws_region": "us-east-1",
                "default_action": "ALLOW",
                "user_pool_id": "us-east-1_s4UGZgOnW"
              }
            ],
            "visibility": "GLOBAL",
            "xray_enabled": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cognito_user_pool.user_pool",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "create_timelapse_item",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/types/Mutation/resolvers/createTimelapseItem",
            "caching_config": [],
            "code": "",
            "data_source": "TimelapseItemsTable",
            "field": "createTimelapseItem",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-Mutation-createTimelapseItem",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"PutItem\",\n  \"key\": {\n    \"id\": $util.dynamodb.toDynamoDBJson($util.autoId())\n  },\n  \"attributeValues\": {\n    \"userId\": $util.dynamodb.toDynamoDBJson($ctx.args.input.userId),\n    \"mediaUrl\": $util.dynamodb.toDynamoDBJson($ctx.args.input.mediaUrl),\n    \"type\": $util.dynamodb.toDynamoDBJson($ctx.args.input.type),\n    \"createdAt\": $util.dynamodb.toDynamoDBJson($ctx.args.input.createdAt),\n    \"description\": $util.dynamodb.toDynamoDBJson($ctx.args.input.description),\n    \"likes\": $util.dynamodb.toDynamoDBJson($ctx.args.input.likes),\n    \"likedBy\": $util.dynamodb.toDynamoDBJson($ctx.args.input.likedBy),\n    \"duration\": $util.dynamodb.toDynamoDBJson($ctx.args.input.duration)\n  }\n}\n",
            "response_template": "$util.toJson($ctx.result)\n",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.timelapse_items_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.timelapse_items_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "delete_timelapse_item",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/types/Mutation/resolvers/deleteTimelapseItem",
            "caching_config": [],
            "code": "",
            "data_source": "TimelapseItemsTable",
            "field": "deleteTimelapseItem",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-Mutation-deleteTimelapseItem",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"DeleteItem\",\n  \"key\": {\n    \"id\": $util.dynamodb.toDynamoDBJson($ctx.args.input.id)\n  }\n}\n",
            "response_template": "$util.toJson($ctx.result)\n",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.timelapse_items_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.timelapse_items_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "generate_presigned_url_resolver",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/types/Mutation/resolvers/generatePresignedUrl",
            "caching_config": [],
            "code": "",
            "data_source": "GeneratePresignedUrlFunction",
            "field": "generatePresignedUrl",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-Mutation-generatePresignedUrl",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"Invoke\",\n  \"payload\": {\n    \"arguments\": $util.toJson($context.arguments),\n    \"identity\": {\n      \"sub\": \"$context.identity.sub\",\n      \"username\": \"$context.identity.username\"\n    }\n  }\n}\n",
            "response_template": "$util.toJson($context.result)",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.generate_presigned_url_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_iam_role.appsync_lambda_role",
            "aws_iam_role.appsync_logs_role",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.presigned_url_lambda",
            "aws_s3_bucket.media_bucket",
            "null_resource.package_presigned_url_lambda",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "list_followed_posts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/types/Query/resolvers/listFollowedPosts",
            "caching_config": [],
            "code": "",
            "data_source": "",
            "field": "listFollowedPosts",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-Query-listFollowedPosts",
            "kind": "PIPELINE",
            "max_batch_size": 0,
            "pipeline_config": [
              {
                "functions": [
                  "z7buknhjzjhpxjzhleb4drgw3e",
                  "3m3qxvgdobfnxhqgdubigwuv4y"
                ]
              }
            ],
            "request_template": "{\n  \"version\": \"2018-05-29\",\n  \"payload\": {}\n}\n",
            "response_template": "$util.toJson($ctx.result)\n",
            "runtime": [],
            "sync_config": [],
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.follows_datasource",
            "aws_appsync_datasource.posts_datasource",
            "aws_appsync_function.get_followed_users",
            "aws_appsync_function.get_posts_by_users",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.follows_table",
            "aws_dynamodb_table.posts_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "list_timelapse_items",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/types/Query/resolvers/listTimelapseItems",
            "caching_config": [],
            "code": "",
            "data_source": "TimelapseItemsTable",
            "field": "listTimelapseItems",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-Query-listTimelapseItems",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"Query\",\n  \"index\": \"byUser\",\n  \"query\": {\n    \"expression\": \"userId = :userId\",\n    \"expressionValues\": {\n      \":userId\": $util.dynamodb.toDynamoDBJson($ctx.args.userId)\n    }\n  },\n  \"limit\": $util.defaultIfNull($ctx.args.limit, 100),\n  \"nextToken\": $util.toJson($util.defaultIfNull($ctx.args.nextToken, null)),\n  \"scanIndexForward\": false\n}\n",
            "response_template": "{\n  \"items\": $util.toJson($ctx.result.items),\n  \"nextToken\": $util.toJson($ctx.result.nextToken)\n}\n",
            "runtime": [],
            "sync_config": [],
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.timelapse_items_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.timelapse_items_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "update_timelapse_item",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "6u47w5vfrfbuxi3mcea6zdswhm",
            "arn": "arn:aws:appsync:us-east-1:130635278160:apis/6u47w5vfrfbuxi3mcea6zdswhm/types/Mutation/resolvers/updateTimelapseItem",
            "caching_config": [],
            "code": "",
            "data_source": "TimelapseItemsTable",
            "field": "updateTimelapseItem",
            "id": "6u47w5vfrfbuxi3mcea6zdswhm-Mutation-updateTimelapseItem",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n  \"version\": \"2018-05-29\",\n  \"operation\": \"UpdateItem\",\n  \"key\": {\n    \"id\": $util.dynamodb.toDynamoDBJson($ctx.args.input.id)\n  },\n  \"update\": {\n    \"expression\": \"SET #likes = :likes, #likedBy = :likedBy, #description = :description\",\n    \"expressionNames\": {\n      \"#likes\": \"likes\",\n      \"#likedBy\": \"likedBy\",\n      \"#description\": \"description\"\n    },\n    \"expressionValues\": {\n      \":likes\": $util.dynamodb.toDynamoDBJson($ctx.args.input.likes),\n      \":likedBy\": $util.dynamodb.toDynamoDBJson($ctx.args.input.likedBy),\n      \":description\": $util.dynamodb.toDynamoDBJson($ctx.args.input.description)\n    }\n  }\n}\n",
            "response_template": "$util.toJson($ctx.result)\n",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.timelapse_items_datasource",
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.timelapse_items_table",
            "aws_iam_role.appsync_dynamodb_role",
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_log_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:130635278160:log-group:/aws/lambda/timelapse-media-processor-dev",
            "id": "/aws/lambda/timelapse-media-processor-dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/timelapse-media-processor-dev",
            "name_prefix": "",
            "retention_in_days": 7,
            "skip_destroy": false,
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_identity_pool",
      "name": "identity_pool",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allow_classic_flow": false,
            "allow_unauthenticated_identities": false,
            "arn": "arn:aws:cognito-identity:us-east-1:130635278160:identitypool/us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55",
            "cognito_identity_providers": [
              {
                "client_id": "2ofl2p1h8ch8ifn3pn678ruhmh",
                "provider_name": "cognito-idp.us-east-1.amazonaws.com/us-east-1_s4UGZgOnW",
                "server_side_token_check": false
              }
            ],
            "developer_provider_name": "",
            "id": "us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55",
            "identity_pool_name": "timelapse-identity-pool-dev",
            "openid_connect_provider_arns": [],
            "saml_provider_arns": [],
            "supported_login_providers": {},
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cognito_user_pool.user_pool",
            "aws_cognito_user_pool_client.app_client"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_identity_pool_roles_attachment",
      "name": "identity_pool_role_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55",
            "identity_pool_id": "us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55",
            "role_mapping": [],
            "roles": {
              "authenticated": "arn:aws:iam::130635278160:role/timelapse-cognito-authenticated-role-dev"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cognito_identity_pool.identity_pool",
            "aws_cognito_user_pool.user_pool",
            "aws_cognito_user_pool_client.app_client",
            "aws_iam_role.authenticated_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_user_pool",
      "name": "user_pool",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_recovery_setting": [
              {
                "recovery_mechanism": [
                  {
                    "name": "verified_email",
                    "priority": 1
                  }
                ]
              }
            ],
            "admin_create_user_config": [
              {
                "allow_admin_create_user_only": false,
                "invite_message_template": []
              }
            ],
            "alias_attributes": null,
            "arn": "arn:aws:cognito-idp:us-east-1:130635278160:userpool/us-east-1_s4UGZgOnW",
            "auto_verified_attributes": [
              "email"
            ],
            "creation_date": "2025-04-12T00:23:49Z",
            "custom_domain": "",
            "deletion_protection": "INACTIVE",
            "device_configuration": [],
            "domain": "",
            "email_configuration": [
              {
                "configuration_set": "",
                "email_sending_account": "COGNITO_DEFAULT",
                "from_email_address": "",
                "reply_to_email_address": "",
                "source_arn": ""
              }
            ],
            "email_mfa_configuration": [],
            "email_verification_message": "",
            "email_verification_subject": "",
            "endpoint": "cognito-idp.us-east-1.amazonaws.com/us-east-1_s4UGZgOnW",
            "estimated_number_of_users": 0,
            "id": "us-east-1_s4UGZgOnW",
            "lambda_config": [],
            "last_modified_date": "2025-04-12T00:23:49Z",
            "mfa_configuration": "OFF",
            "name": "timelapse-user-pool-dev",
            "password_policy": [
              {
                "minimum_length": 8,
                "password_history_size": 0,
                "require_lowercase": true,
                "require_numbers": true,
                "require_symbols": false,
                "require_uppercase": true,
                "temporary_password_validity_days": 7
              }
            ],
            "schema": [
              {
                "attribute_data_type": "String",
                "developer_only_attribute": false,
                "mutable": true,
                "name": "bio",
                "number_attribute_constraints": [],
                "required": false,
                "string_attribute_constraints": [
                  {
                    "max_length": "500",
                    "min_length": "0"
                  }
                ]
              },
              {
                "attribute_data_type": "String",
                "developer_only_attribute": false,
                "mutable": true,
                "name": "email",
                "number_attribute_constraints": [],
                "required": true,
                "string_attribute_constraints": []
              },
              {
                "attribute_data_type": "String",
                "developer_only_attribute": false,
                "mutable": true,
                "name": "name",
                "number_attribute_constraints": [],
                "required": true,
                "string_attribute_constraints": []
              },
              {
                "attribute_data_type": "String",
                "developer_only_attribute": false,
                "mutable": true,
                "name": "profile_picture",
                "number_attribute_constraints": [],
                "required": false,
                "string_attribute_constraints": [
                  {
                    "max_length": "2048",
                    "min_length": "0"
                  }
                ]
              }
            ],
            "sign_in_policy": [
              {
                "allowed_first_auth_factors": [
                  "PASSWORD"
                ]
              }
            ],
            "sms_authentication_message": "",
            "sms_configuration": [],
            "sms_verification_message": "",
            "software_token_mfa_configuration": [],
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "user_attribute_update_settings": [],
            "user_pool_add_ons": [],
            "user_pool_tier": "ESSENTIALS",
            "username_attributes": [
              "email"
            ],
            "username_configuration": [],
            "verification_message_template": [
              {
                "default_email_option": "CONFIRM_WITH_CODE",
                "email_message": "",
                "email_message_by_link": "",
                "email_subject": "",
                "email_subject_by_link": "",
                "sms_message": ""
              }
            ],
            "web_authn_configuration": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_cognito_user_pool_client",
      "name": "app_client",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_token_validity": 1,
            "allowed_oauth_flows": [
              "code",
              "implicit"
            ],
            "allowed_oauth_flows_user_pool_client": true,
            "allowed_oauth_scopes": [
              "email",
              "openid",
              "profile"
            ],
            "analytics_configuration": [],
            "auth_session_validity": 3,
            "callback_urls": [
              "https://timelapse.auth.us-east-1.amazoncognito.com/oauth2/idpresponse",
              "timelapse://callback"
            ],
            "client_secret": "",
            "default_redirect_uri": "",
            "enable_propagate_additional_user_context_data": false,
            "enable_token_revocation": true,
            "explicit_auth_flows": [
              "ALLOW_CUSTOM_AUTH",
              "ALLOW_REFRESH_TOKEN_AUTH",
              "ALLOW_USER_PASSWORD_AUTH",
              "ALLOW_USER_SRP_AUTH"
            ],
            "generate_secret": false,
            "id": "2ofl2p1h8ch8ifn3pn678ruhmh",
            "id_token_validity": 1,
            "logout_urls": [
              "timelapse://signout"
            ],
            "name": "timelapse-app-client-dev",
            "prevent_user_existence_errors": "ENABLED",
            "read_attributes": [],
            "refresh_token_validity": 60,
            "supported_identity_providers": [
              "COGNITO"
            ],
            "token_validity_units": [
              {
                "access_token": "hours",
                "id_token": "hours",
                "refresh_token": "days"
              }
            ],
            "user_pool_id": "us-east-1_s4UGZgOnW",
            "write_attributes": []
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_cognito_user_pool.user_pool"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "follows_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:130635278160:table/follows",
            "attribute": [
              {
                "name": "createdAt",
                "type": "S"
              },
              {
                "name": "followerId",
                "type": "S"
              },
              {
                "name": "followingId",
                "type": "S"
              },
              {
                "name": "id",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "followerId",
                "name": "byFollowerId",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              },
              {
                "hash_key": "followingId",
                "name": "byFollowingId",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              }
            ],
            "hash_key": "id",
            "id": "follows",
            "import_table": [],
            "local_secondary_index": [],
            "name": "follows",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "createdAt",
            "read_capacity": 5,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 5
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "interactions_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:130635278160:table/interactions",
            "attribute": [
              {
                "name": "createdAt",
                "type": "S"
              },
              {
                "name": "id",
                "type": "S"
              },
              {
                "name": "postId",
                "type": "S"
              },
              {
                "name": "type",
                "type": "S"
              },
              {
                "name": "userId",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "postId",
                "name": "byPostId",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              },
              {
                "hash_key": "type",
                "name": "byType",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              },
              {
                "hash_key": "userId",
                "name": "byUserId",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              }
            ],
            "hash_key": "id",
            "id": "interactions",
            "import_table": [],
            "local_secondary_index": [],
            "name": "interactions",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "createdAt",
            "read_capacity": 5,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 5
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "posts_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:130635278160:table/posts",
            "attribute": [
              {
                "name": "createdAt",
                "type": "S"
              },
              {
                "name": "featured",
                "type": "S"
              },
              {
                "name": "id",
                "type": "S"
              },
              {
                "name": "userId",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "featured",
                "name": "byFeatured",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              },
              {
                "hash_key": "userId",
                "name": "byUserId",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              }
            ],
            "hash_key": "id",
            "id": "posts",
            "import_table": [],
            "local_secondary_index": [],
            "name": "posts",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "createdAt",
            "read_capacity": 5,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 5
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "timelapse_items_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:130635278160:table/timelapse-timelapse-items-dev",
            "attribute": [
              {
                "name": "createdAt",
                "type": "N"
              },
              {
                "name": "id",
                "type": "S"
              },
              {
                "name": "userId",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "userId",
                "name": "byUser",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 0,
                "write_capacity": 0
              }
            ],
            "hash_key": "id",
            "id": "timelapse-timelapse-items-dev",
            "import_table": [],
            "local_secondary_index": [],
            "name": "timelapse-timelapse-items-dev",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev",
              "Name": "timelapse-timelapse-items-dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev",
              "Name": "timelapse-timelapse-items-dev"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "timelapses",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:130635278160:table/timelapses",
            "attribute": [
              {
                "name": "createdAt",
                "type": "S"
              },
              {
                "name": "featured",
                "type": "S"
              },
              {
                "name": "id",
                "type": "S"
              },
              {
                "name": "userId",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "featured",
                "name": "byFeatured",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              },
              {
                "hash_key": "userId",
                "name": "byUserId",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              }
            ],
            "hash_key": "id",
            "id": "timelapses",
            "import_table": [],
            "local_secondary_index": [],
            "name": "timelapses",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "createdAt",
            "read_capacity": 5,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 5
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "users_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:130635278160:table/users",
            "attribute": [
              {
                "name": "createdAt",
                "type": "S"
              },
              {
                "name": "id",
                "type": "S"
              },
              {
                "name": "username",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "username",
                "name": "byUsername",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "createdAt",
                "read_capacity": 5,
                "write_capacity": 5
              }
            ],
            "hash_key": "id",
            "id": "users",
            "import_table": [],
            "local_secondary_index": [],
            "name": "users",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "createdAt",
            "read_capacity": 5,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "tags_all": {
              "Environment": "dev",
              "Project": "timelapse"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 5
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "authenticated_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:policy/timelapse-authenticated-policy-dev",
            "attachment_count": 1,
            "description": "Policy for authenticated users in the timelapse application",
            "id": "arn:aws:iam::130635278160:policy/timelapse-authenticated-policy-dev",
            "name": "timelapse-authenticated-policy-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/uploads/${cognito-identity.amazonaws.com:sub}/*\",\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/processed/${cognito-identity.amazonaws.com:sub}/*\",\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/thumbnails/${cognito-identity.amazonaws.com:sub}/*\"]},{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/processed/*\",\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/thumbnails/*\"]},{\"Action\":\"s3:ListBucket\",\"Condition\":{\"StringLike\":{\"s3:prefix\":[\"uploads/${cognito-identity.amazonaws.com:sub}/*\",\"processed/${cognito-identity.amazonaws.com:sub}/*\",\"thumbnails/${cognito-identity.amazonaws.com:sub}/*\",\"processed/*\",\"thumbnails/*\"]}},\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::timelapse-media-dev-de7fe9a5\"},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:DeleteItem\",\"dynamodb:BatchGetItem\"],\"Condition\":{\"ForAllValues:StringEquals\":{\"dynamodb:LeadingKeys\":[\"${cognito-identity.amazonaws.com:sub}\"]}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:130635278160:table/users\",\"arn:aws:dynamodb:us-east-1:130635278160:table/timelapses\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts\",\"arn:aws:dynamodb:us-east-1:130635278160:table/interactions\"]},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:BatchGetItem\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:130635278160:table/users\",\"arn:aws:dynamodb:us-east-1:130635278160:table/timelapses\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts\",\"arn:aws:dynamodb:us-east-1:130635278160:table/users/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/timelapses/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts/index/*\"]},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:Query\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:DeleteItem\"],\"Condition\":{\"ForAllValues:StringEquals\":{\"dynamodb:LeadingKeys\":[\"${cognito-identity.amazonaws.com:sub}\"]}},\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:130635278160:table/follows\",\"arn:aws:dynamodb:us-east-1:130635278160:table/follows/index/*\"]},{\"Action\":[\"appsync:GraphQL\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:appsync:us-east-1:*:apis/*\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAR42TYE5IHTMGWBVHW",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.follows_table",
            "aws_dynamodb_table.interactions_table",
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.timelapses",
            "aws_dynamodb_table.users_table",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:policy/timelapse-lambda-policy-dev",
            "attachment_count": 1,
            "description": "Policy for Lambda function to access S3 and DynamoDB",
            "id": "arn:aws:iam::130635278160:policy/timelapse-lambda-policy-dev",
            "name": "timelapse-lambda-policy-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"},{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::timelapse-media-dev-de7fe9a5\",\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/*\"]},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:Query\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:130635278160:table/users\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts/index/*\"]}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAR42TYE5IBUQYUKMZK",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.users_table",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "lambda_s3_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:policy/timelapse-lambda-s3-access-dev",
            "attachment_count": 1,
            "description": "Allow Lambda to generate presigned URLs for S3",
            "id": "arn:aws:iam::130635278160:policy/timelapse-lambda-s3-access-dev",
            "name": "timelapse-lambda-s3-access-dev",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"s3:PutObject\",\"s3:GetObject\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:s3:::timelapse-media-dev-de7fe9a5/*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPAR42TYE5IAMF2LYF5V",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "appsync_dynamodb_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:role/timelapse-appsync-dynamodb-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-12T00:23:48Z",
            "description": "",
            "force_detach_policies": false,
            "id": "timelapse-appsync-dynamodb-role-dev",
            "inline_policy": [
              {
                "name": "timelapse-appsync-dynamodb-policy-dev",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:DeleteItem\",\"dynamodb:UpdateItem\",\"dynamodb:Query\",\"dynamodb:Scan\",\"dynamodb:BatchGetItem\",\"dynamodb:BatchWriteItem\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:130635278160:table/users\",\"arn:aws:dynamodb:us-east-1:130635278160:table/users/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/follows\",\"arn:aws:dynamodb:us-east-1:130635278160:table/follows/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/interactions\",\"arn:aws:dynamodb:us-east-1:130635278160:table/interactions/index/*\"]}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "timelapse-appsync-dynamodb-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "unique_id": "AROAR42TYE5IAR6I2ZWFH"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "appsync_lambda_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:role/timelapse-appsync-lambda-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-12T00:23:48Z",
            "description": "",
            "force_detach_policies": false,
            "id": "timelapse-appsync-lambda-role-dev",
            "inline_policy": [
              {
                "name": "timelapse-appsync-lambda-policy-dev",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"lambda:InvokeFunction\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev\"]}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "timelapse-appsync-lambda-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "unique_id": "AROAR42TYE5IPBW2HO5ZH"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "appsync_logs_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:role/timelapse-appsync-logs-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-12T00:23:48Z",
            "description": "",
            "force_detach_policies": false,
            "id": "timelapse-appsync-logs-role-dev",
            "inline_policy": [
              {
                "name": "timelapse-appsync-logs-policy-dev",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "timelapse-appsync-logs-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "unique_id": "AROAR42TYE5ICG4RSIFSA"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "authenticated_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:role/timelapse-cognito-authenticated-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Condition\":{\"ForAnyValue:StringLike\":{\"cognito-identity.amazonaws.com:amr\":\"authenticated\"},\"StringEquals\":{\"cognito-identity.amazonaws.com:aud\":\"us-east-1:9ed1d9f0-a93d-4491-928b-638eb9881b55\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"cognito-identity.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-12T00:23:52Z",
            "description": "",
            "force_detach_policies": false,
            "id": "timelapse-cognito-authenticated-role-dev",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::130635278160:policy/timelapse-authenticated-policy-dev"
            ],
            "max_session_duration": 3600,
            "name": "timelapse-cognito-authenticated-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "unique_id": "AROAR42TYE5INSFVVWGT3"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cognito_identity_pool.identity_pool",
            "aws_cognito_user_pool.user_pool",
            "aws_cognito_user_pool_client.app_client"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_exec_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::130635278160:role/timelapse-lambda-exec-role-dev",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-04-12T00:23:48Z",
            "description": "",
            "force_detach_policies": false,
            "id": "timelapse-lambda-exec-role-dev",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::130635278160:policy/timelapse-lambda-policy-dev",
              "arn:aws:iam::130635278160:policy/timelapse-lambda-s3-access-dev"
            ],
            "max_session_duration": 3600,
            "name": "timelapse-lambda-exec-role-dev",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "unique_id": "AROAR42TYE5IL3KCDCWO5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "appsync_dynamodb_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "timelapse-appsync-dynamodb-role-dev:timelapse-appsync-dynamodb-policy-dev",
            "name": "timelapse-appsync-dynamodb-policy-dev",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:DeleteItem\",\"dynamodb:UpdateItem\",\"dynamodb:Query\",\"dynamodb:Scan\",\"dynamodb:BatchGetItem\",\"dynamodb:BatchWriteItem\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:130635278160:table/users\",\"arn:aws:dynamodb:us-east-1:130635278160:table/users/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts\",\"arn:aws:dynamodb:us-east-1:130635278160:table/posts/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/follows\",\"arn:aws:dynamodb:us-east-1:130635278160:table/follows/index/*\",\"arn:aws:dynamodb:us-east-1:130635278160:table/interactions\",\"arn:aws:dynamodb:us-east-1:130635278160:table/interactions/index/*\"]}]}",
            "role": "timelapse-appsync-dynamodb-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.follows_table",
            "aws_dynamodb_table.interactions_table",
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.users_table",
            "aws_iam_role.appsync_dynamodb_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "appsync_lambda_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "timelapse-appsync-lambda-role-dev:timelapse-appsync-lambda-policy-dev",
            "name": "timelapse-appsync-lambda-policy-dev",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"lambda:InvokeFunction\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev\"]}]}",
            "role": "timelapse-appsync-lambda-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.appsync_lambda_role",
            "aws_iam_role.lambda_exec_role",
            "aws_lambda_function.presigned_url_lambda",
            "aws_s3_bucket.media_bucket",
            "null_resource.package_presigned_url_lambda",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "appsync_logs_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "timelapse-appsync-logs-role-dev:timelapse-appsync-logs-policy-dev",
            "name": "timelapse-appsync-logs-policy-dev",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}",
            "role": "timelapse-appsync-logs-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.appsync_logs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "attach_authenticated_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "timelapse-cognito-authenticated-role-dev-20250412002412035600000003",
            "policy_arn": "arn:aws:iam::130635278160:policy/timelapse-authenticated-policy-dev",
            "role": "timelapse-cognito-authenticated-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_cognito_identity_pool.identity_pool",
            "aws_cognito_user_pool.user_pool",
            "aws_cognito_user_pool_client.app_client",
            "aws_dynamodb_table.follows_table",
            "aws_dynamodb_table.interactions_table",
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.timelapses",
            "aws_dynamodb_table.users_table",
            "aws_iam_policy.authenticated_policy",
            "aws_iam_role.authenticated_role",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "timelapse-lambda-exec-role-dev-20250412002412003800000002",
            "policy_arn": "arn:aws:iam::130635278160:policy/timelapse-lambda-policy-dev",
            "role": "timelapse-lambda-exec-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.users_table",
            "aws_iam_policy.lambda_policy",
            "aws_iam_role.lambda_exec_role",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_s3_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "timelapse-lambda-exec-role-dev-20250412002350306100000001",
            "policy_arn": "arn:aws:iam::130635278160:policy/timelapse-lambda-s3-access-dev",
            "role": "timelapse-lambda-exec-role-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_policy.lambda_s3_policy",
            "aws_iam_role.lambda_exec_role",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "media_processor",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:130635278160:function:timelapse-media-processor-dev",
            "code_sha256": "PM7sAJq7/Lf30tUc0lO+lIeum3QHsipOu40DtkfgHgk=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "API_URL": "https://6u47w5vfrfbuxi3mcea6zdswhm.appsync-api.us-east-1.amazonaws.com/graphql",
                  "POSTS_TABLE": "posts",
                  "S3_BUCKET": "timelapse-media-dev-de7fe9a5",
                  "STAGE": "dev",
                  "USERS_TABLE": "users"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "lambda/media-processor-dev.zip",
            "function_name": "timelapse-media-processor-dev",
            "handler": "index.handler",
            "id": "timelapse-media-processor-dev",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:130635278160:function:timelapse-media-processor-dev/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-04-12T00:24:24.262+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/timelapse-media-processor-dev",
                "system_log_level": ""
              }
            ],
            "memory_size": 512,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:130635278160:function:timelapse-media-processor-dev:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:130635278160:function:timelapse-media-processor-dev:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::130635278160:role/timelapse-lambda-exec-role-dev",
            "runtime": "nodejs18.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 24183167,
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "timeout": 30,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.users_table",
            "aws_iam_policy.lambda_policy",
            "aws_iam_role.appsync_logs_role",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role_policy_attachment.lambda_policy_attachment",
            "aws_lambda_layer_version.image_processing_layer",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "presigned_url_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev",
            "code_sha256": "z83EPNQRgGmxvw2FPvSQa9uiph0CleKbBKPFzFB8P4I=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "BUCKET_NAME": "timelapse-media-dev-de7fe9a5"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "./lambda/presigned_url_lambda.zip",
            "function_name": "timelapse-presigned-url-dev",
            "handler": "generate_presigned_url.handler",
            "id": "timelapse-presigned-url-dev",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-04-12T00:23:58.974+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/timelapse-presigned-url-dev",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:130635278160:function:timelapse-presigned-url-dev:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::130635278160:role/timelapse-lambda-exec-role-dev",
            "runtime": "nodejs18.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 862,
            "tags": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev"
            },
            "timeout": 10,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.lambda_exec_role",
            "aws_s3_bucket.media_bucket",
            "null_resource.package_presigned_url_lambda",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_s3",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "timelapse-media-processor-dev",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromS3Bucket",
            "principal": "s3.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:s3:::timelapse-media-dev-de7fe9a5",
            "statement_id": "AllowExecutionFromS3Bucket",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.users_table",
            "aws_iam_policy.lambda_policy",
            "aws_iam_role.appsync_logs_role",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role_policy_attachment.lambda_policy_attachment",
            "aws_lambda_function.media_processor",
            "aws_lambda_layer_version.image_processing_layer",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "media_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::timelapse-media-dev-de7fe9a5",
            "bucket": "timelapse-media-dev-de7fe9a5",
            "bucket_domain_name": "timelapse-media-dev-de7fe9a5.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "timelapse-media-dev-de7fe9a5.s3.us-east-1.amazonaws.com",
            "cors_rule": [
              {
                "allowed_headers": [
                  "*"
                ],
                "allowed_methods": [
                  "POST",
                  "GET",
                  "HEAD",
                  "DELETE",
                  "PUT"
                ],
                "allowed_origins": [
                  "*"
                ],
                "expose_headers": [
                  "ETag",
                  "Content-Type",
                  "Content-Length"
                ],
                "max_age_seconds": 3600
              }
            ],
            "force_destroy": true,
            "grant": [
              {
                "id": "1c26b1a5b08ca5cec1a221b019ca74a565474461ee8aea41f99a89cf79eb58c2",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "timelapse-media-dev-de7fe9a5",
            "lifecycle_rule": [
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [],
                "id": "cleanup_old_versions",
                "noncurrent_version_expiration": [
                  {
                    "days": 30
                  }
                ],
                "noncurrent_version_transition": [],
                "prefix": "versions/",
                "tags": {},
                "transition": []
              }
            ],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Application": "timelapse",
              "Environment": "dev",
              "Name": "timelapse-media-dev-de7fe9a5"
            },
            "tags_all": {
              "Application": "timelapse",
              "Environment": "dev",
              "Name": "timelapse-media-dev-de7fe9a5"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_cors_configuration",
      "name": "media_bucket_cors",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "timelapse-media-dev-de7fe9a5",
            "cors_rule": [
              {
                "allowed_headers": [
                  "*"
                ],
                "allowed_methods": [
                  "DELETE",
                  "GET",
                  "HEAD",
                  "POST",
                  "PUT"
                ],
                "allowed_origins": [
                  "*"
                ],
                "expose_headers": [
                  "Content-Length",
                  "Content-Type",
                  "ETag"
                ],
                "id": "",
                "max_age_seconds": 3600
              }
            ],
            "expected_bucket_owner": "",
            "id": "timelapse-media-dev-de7fe9a5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_lifecycle_configuration",
      "name": "media_bucket_lifecycle",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "bucket": "timelapse-media-dev-de7fe9a5",
            "expected_bucket_owner": "",
            "id": "timelapse-media-dev-de7fe9a5",
            "rule": [
              {
                "abort_incomplete_multipart_upload": [],
                "expiration": [],
                "filter": [
                  {
                    "and": [],
                    "object_size_greater_than": null,
                    "object_size_less_than": null,
                    "prefix": "versions/",
                    "tag": []
                  }
                ],
                "id": "cleanup_old_versions",
                "noncurrent_version_expiration": [
                  {
                    "newer_noncurrent_versions": null,
                    "noncurrent_days": 30
                  }
                ],
                "noncurrent_version_transition": [],
                "prefix": "",
                "status": "Enabled",
                "transition": []
              }
            ],
            "timeouts": null,
            "transition_default_minimum_object_size": "all_storage_classes_128K"
          },
          "sensitive_attributes": [],
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "timelapse-media-dev-de7fe9a5",
            "eventbridge": false,
            "id": "timelapse-media-dev-de7fe9a5",
            "lambda_function": [
              {
                "events": [
                  "s3:ObjectCreated:*"
                ],
                "filter_prefix": "uploads/",
                "filter_suffix": "",
                "id": "tf-s3-lambda-20250412002431299700000004",
                "lambda_function_arn": "arn:aws:lambda:us-east-1:130635278160:function:timelapse-media-processor-dev"
              }
            ],
            "queue": [],
            "topic": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.timelapse_api",
            "aws_cognito_user_pool.user_pool",
            "aws_dynamodb_table.posts_table",
            "aws_dynamodb_table.users_table",
            "aws_iam_policy.lambda_policy",
            "aws_iam_role.appsync_logs_role",
            "aws_iam_role.lambda_exec_role",
            "aws_iam_role_policy_attachment.lambda_policy_attachment",
            "aws_lambda_function.media_processor",
            "aws_lambda_layer_version.image_processing_layer",
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "media_bucket_public_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "timelapse-media-dev-de7fe9a5",
            "id": "timelapse-media-dev-de7fe9a5",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_server_side_encryption_configuration",
      "name": "media_bucket_encryption",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "timelapse-media-dev-de7fe9a5",
            "expected_bucket_owner": "",
            "id": "timelapse-media-dev-de7fe9a5",
            "rule": [
              {
                "apply_server_side_encryption_by_default": [
                  {
                    "kms_master_key_id": "",
                    "sse_algorithm": "AES256"
                  }
                ],
                "bucket_key_enabled": false
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "media_bucket_versioning",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "timelapse-media-dev-de7fe9a5",
            "expected_bucket_owner": "",
            "id": "timelapse-media-dev-de7fe9a5",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Suspended"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "processed_folder",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "arn": "arn:aws:s3:::timelapse-media-dev-de7fe9a5/processed/",
            "bucket": "timelapse-media-dev-de7fe9a5",
            "bucket_key_enabled": false,
            "cache_control": "",
            "checksum_algorithm": null,
            "checksum_crc32": "",
            "checksum_crc32c": "",
            "checksum_crc64nvme": "",
            "checksum_sha1": "",
            "checksum_sha256": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "application/x-directory",
            "etag": "d41d8cd98f00b204e9800998ecf8427e",
            "force_destroy": false,
            "id": "processed/",
            "key": "processed/",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "override_provider": [],
            "server_side_encryption": "AES256",
            "source": null,
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": {},
            "tags_all": {},
            "version_id": "null",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "thumbnails_folder",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "arn": "arn:aws:s3:::timelapse-media-dev-de7fe9a5/thumbnails/",
            "bucket": "timelapse-media-dev-de7fe9a5",
            "bucket_key_enabled": false,
            "cache_control": "",
            "checksum_algorithm": null,
            "checksum_crc32": "",
            "checksum_crc32c": "",
            "checksum_crc64nvme": "",
            "checksum_sha1": "",
            "checksum_sha256": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "application/x-directory",
            "etag": "d41d8cd98f00b204e9800998ecf8427e",
            "force_destroy": false,
            "id": "thumbnails/",
            "key": "thumbnails/",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "override_provider": [],
            "server_side_encryption": "AES256",
            "source": null,
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": {},
            "tags_all": {},
            "version_id": "null",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_s3_object",
      "name": "uploads_folder",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "arn": "arn:aws:s3:::timelapse-media-dev-de7fe9a5/uploads/",
            "bucket": "timelapse-media-dev-de7fe9a5",
            "bucket_key_enabled": false,
            "cache_control": "",
            "checksum_algorithm": null,
            "checksum_crc32": "",
            "checksum_crc32c": "",
            "checksum_crc64nvme": "",
            "checksum_sha1": "",
            "checksum_sha256": "",
            "content": null,
            "content_base64": null,
            "content_disposition": "",
            "content_encoding": "",
            "content_language": "",
            "content_type": "application/x-directory",
            "etag": "d41d8cd98f00b204e9800998ecf8427e",
            "force_destroy": false,
            "id": "uploads/",
            "key": "uploads/",
            "kms_key_id": null,
            "metadata": {},
            "object_lock_legal_hold_status": "",
            "object_lock_mode": "",
            "object_lock_retain_until_date": "",
            "override_provider": [],
            "server_side_encryption": "AES256",
            "source": null,
            "source_hash": null,
            "storage_class": "STANDARD",
            "tags": {},
            "tags_all": {},
            "version_id": "null",
            "website_redirect": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_s3_bucket.media_bucket",
            "random_id.suffix"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "package_presigned_url_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4692552340652442063",
            "triggers": {
              "lambda_code": "ca130158de24a125ffc7c5ffbeff0660"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "random_id",
      "name": "suffix",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "b64_std": "3n/ppQ==",
            "b64_url": "3n_ppQ",
            "byte_length": 4,
            "dec": "3732924837",
            "hex": "de7fe9a5",
            "id": "3n_ppQ",
            "keepers": null,
            "prefix": null
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
